tool:
  id: rest
  name: REST Tool
  summary: Perform REST requests relative to a base URL.
  category: specialized
  version: v1

envelope:
  capabilities: false
  health: false
  streaming: false
  long_running: false

schema:
  shared_fields:
    - lang
  request:
    type: object
    properties:
      base:
        type: string
        format: uri
      path:
        type: string
      method:
        type: string
        enum: [GET, POST, PUT, PATCH, DELETE]
        default: GET
      headers:
        type: object
        additionalProperties:
          type: string
      params:
        type: object
        additionalProperties:
          type: string
      body:
        type: [string, 'null']
    required: [base, path]
    additionalProperties: false
  response:
    type: object
    properties:
      status:
        type: integer
      json:
        type: ['object', 'null']
      text:
        type: string
    required: [status, text]

operations:
  - id: request
    summary: Issue a REST call.
    example:
      request:
        base: https://example.com
        path: /
        method: GET
      response:
        status: 200
        json: null

adapters:
  - language: python
    template: rest_client
    deps:
      python:
        requirements: [requests]
  - language: node
    template: rest_client
    deps:
      node:
        packages: []
  - language: go
    template: rest_client
    deps:
      go:
        modules: []
  - language: rust
    template: rest_client
    deps:
      rust:
        crates: [reqwest, serde_json]
  - language: dotnet
    template: rest_client
    deps:
      dotnet:
        packages: []

policy:
  network: allow
  filesystem: deny
  secrets: deny

telemetry:
  emit:
    - channel: tool.rest
      fields: [method, path]

testing:
  cases:
    - description: Requires base and path
      request:
        base: https://example.com
      expect:
        ok: False
        error.code: E_PLAN

marketplace:
  tags: [rest, http]
  maturity: beta
