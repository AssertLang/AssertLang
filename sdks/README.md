# Client SDKs

Production-ready client libraries for consuming MCP servers generated by Promptware.

## Overview

This directory contains client SDKs in multiple languages that make it easy to interact with MCP servers. All SDKs provide the same core features: circuit breaker pattern, automatic retries, connection pooling, and dynamic verb discovery.

## Available SDKs

### Python SDK (`python/`)

**Location**: `sdks/python/`

**Installation**:
```bash
pip install promptware
```

**Usage**:
```python
from promptware.sdk import Agent

# Connect to MCP server
agent = Agent("http://localhost:3000", max_retries=5)

# Dynamic verb calls with dot notation
user = agent.user.create(email="alice@example.com", name="Alice")
profile = agent.user.get(user_id=user['user_id'])
```

**Features**:
- Circuit breaker pattern with automatic recovery
- Exponential backoff retry logic
- Connection pooling for performance
- Dynamic verb discovery via Python Proxy
- Type hints and dataclasses
- Async support

### JavaScript/Node.js SDK (`javascript/`)

**Location**: `sdks/javascript/`

**Installation**:
```bash
npm install @promptware/client
```

**Usage**:
```javascript
import { Agent } from '@promptware/client';

// Connect to MCP server
const agent = new Agent('http://localhost:3000', {
  maxRetries: 5,
  circuitBreakerThreshold: 10
});

// Dynamic verb calls
const user = await agent.user.create({
  email: 'alice@example.com',
  name: 'Alice'
});
const profile = await agent.user.get({ user_id: user.user_id });
```

**Features**:
- Circuit breaker with EventEmitter for state changes
- Automatic retry with exponential backoff
- Connection keep-alive
- Dynamic proxy for verb calls
- Promise-based async API
- TypeScript definitions included

### Go SDK (`go/`)

**Location**: `sdks/go/`

**Installation**:
```bash
go get github.com/Promptware-dev/promptware/sdks/go
```

**Usage**:
```go
import "github.com/Promptware-dev/promptware/sdks/go"

// Connect to MCP server
agent := promptware.NewAgent("http://localhost:3000")

// Call verbs
result, err := agent.Call("user.create@v1", map[string]interface{}{
    "email": "alice@example.com",
    "name": "Alice",
})
```

**Features**:
- Circuit breaker pattern
- Retry logic with backoff
- Goroutine-safe
- Context support for cancellation
- Structured error handling

### .NET SDK (`dotnet/`)

**Location**: `sdks/dotnet/`

**Installation**:
```bash
dotnet add package Promptware.Client
```

**Usage**:
```csharp
using Promptware.Client;

// Connect to MCP server
var agent = new Agent("http://localhost:3000");

// Call verbs
var user = await agent.CallAsync("user.create@v1", new {
    email = "alice@example.com",
    name = "Alice"
});
```

**Features**:
- Circuit breaker pattern
- Async/await support
- Retry policy with Polly
- HttpClient best practices
- Strongly typed responses

## Common Features

All SDKs provide:

- ✅ **Circuit Breaker** - Automatic failure detection and recovery
- ✅ **Retry Logic** - Exponential backoff with configurable retries
- ✅ **Connection Pooling** - Efficient HTTP connection reuse
- ✅ **Dynamic Verb Discovery** - Call any verb without code generation
- ✅ **Error Handling** - Structured error responses
- ✅ **Health Checks** - Built-in health check support

## Choosing an SDK

| SDK | Best For | Key Advantage |
|-----|----------|---------------|
| **Python** | Data science, AI/ML, scripting | Rich ecosystem, easy integration |
| **JavaScript** | Web apps, serverless, Node.js | Async-first, browser support |
| **Go** | Microservices, high performance | Fast, compiled, low memory |
| **.NET** | Enterprise, Windows, Azure | Type safety, async/await |

## Configuration

### Connection Settings

All SDKs support these configuration options:

```
baseURL           - MCP server URL (required)
maxRetries        - Maximum retry attempts (default: 3)
timeout           - Request timeout in seconds (default: 30)
circuitThreshold  - Failures before circuit opens (default: 5)
circuitTimeout    - Circuit breaker reset timeout (default: 60s)
```

### Environment Variables

SDKs respect these environment variables:

```bash
MCP_SERVER_URL           # Default server URL
MCP_MAX_RETRIES          # Default max retries
MCP_TIMEOUT              # Default timeout
MCP_CIRCUIT_THRESHOLD    # Circuit breaker threshold
```

## Testing Your Integration

All SDKs include test utilities:

```python
# Python
from promptware.sdk import Agent
agent = Agent("http://localhost:3000")
health = agent.health()  # Returns health status
```

```javascript
// JavaScript
const agent = new Agent('http://localhost:3000');
const health = await agent.health();  // Returns health status
```

```go
// Go
agent := promptware.NewAgent("http://localhost:3000")
health, err := agent.Health()  // Returns health status
```

```csharp
// C#
var agent = new Agent("http://localhost:3000");
var health = await agent.HealthAsync();  // Returns health status
```

## Documentation

### Per-SDK Documentation

- [Python SDK Documentation](python/README.md)
- [JavaScript SDK Documentation](javascript/README.md)
- [Go SDK Documentation](go/README.md)
- [.NET SDK Documentation](dotnet/README.md)

### General Documentation

- [MCP Protocol Specification](../docs/mcp-protocol.md)
- [Error Handling Guide](../docs/error-handling.md)
- [Best Practices](../docs/sdk-best-practices.md)

## Examples

See `examples/` directory for complete examples:

- `examples/python-client/` - Python client examples
- `examples/nodejs-client/` - Node.js client examples
- `examples/go-client/` - Go client examples
- `examples/dotnet-client/` - .NET client examples

## Support

- **GitHub Issues**: https://github.com/Promptware-dev/promptware/issues
- **Documentation**: See `docs/` directory
- **Community**: Join our Discord (link in main README)

## Contributing

See [CONTRIBUTING.md](../CONTRIBUTING.md) for:
- How to add features to SDKs
- Testing requirements
- Code style guidelines
- Release process

## Version

Current: v2.1.0-beta
Status: Production Ready
