tool:
  id: storage
  name: Storage Tool
  summary: Filesystem-oriented storage operations (put/get/list/delete).
  category: data
  version: v1

envelope:
  capabilities: false
  health: false
  streaming: false
  long_running: false

schema:
  shared_fields:
    - lang
    - runtime
  request:
    type: object
    properties:
      backend:
        type: string
        enum: [fs]
        default: fs
      op:
        type: string
        enum: [put, get, list, delete]
      params:
        type: object
        properties:
          path:
            type: string
          content:
            type: string
          glob:
            type: string
        required: [path]
        additionalProperties: true
    required: [backend, op, params]
    additionalProperties: false
  response:
    type: object
    properties:
      written:
        type: boolean
      content:
        type: string
      items:
        type: array
        items:
          type: string
      deleted:
        type: boolean
    additionalProperties: true

operations:
  - id: write
    summary: Write content to a file.
    example:
      request:
        backend: fs
        op: put
        params:
          path: data.txt
          content: hello
      response:
        written: true

adapters:
  - language: python
    template: storage_fs
    deps:
      python:
        requirements: []
  - language: node
    template: storage_fs
    deps:
      node:
        packages: []
  - language: go
    template: storage_fs
    deps:
      go:
        modules: []
  - language: rust
    template: storage_fs
    deps:
      rust:
        crates: []
  - language: dotnet
    template: storage_fs
    deps:
      dotnet:
        packages: []

policy:
  network: deny
  filesystem: readwrite
  secrets: deny
  timeout_sec: 30

telemetry:
  emit:
    - channel: tool.storage
      fields: [op, backend]

testing:
  cases:
    - description: Requires path for filesystem operations.
      request:
        backend: fs
        op: put
        params: {}
      expect:
        ok: False
        error.code: E_ARGS

marketplace:
  tags: [storage, filesystem]
  maturity: beta
