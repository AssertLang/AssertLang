tool:
  id: loop
  name: Loop Tool
  summary: Iterate items and report iteration count.
  category: control-flow
  version: v1

envelope:
  capabilities: false
  health: false
  streaming: false
  long_running: false

schema:
  shared_fields:
    - lang
  request:
    type: object
    properties:
      items:
        type: array
      body:
        type: array
        items:
          type: object
    required: [items]
    additionalProperties: false
  response:
    type: object
    properties:
      iterations:
        type: integer
    required: [iterations]

operations:
  - id: count
    summary: Count items.
    example:
      request:
        items: [1, 2]
        body: []
      response:
        iterations: 2

adapters:
  - language: python
    template: loop_counter
    deps:
      python:
        requirements: []
  - language: node
    template: loop_counter
    deps:
      node:
        packages: []
  - language: go
    template: loop_counter
    deps:
      go:
        modules: []
  - language: rust
    template: loop_counter
    deps:
      rust:
        crates: []
  - language: dotnet
    template: loop_counter
    deps:
      dotnet:
        packages: []

policy:
  network: deny
  filesystem: deny
  secrets: deny

telemetry:
  emit:
    - channel: tool.loop
      fields: []

testing:
  cases:
    - description: count items
      request:
        items: [1, 2, 3]
        body: []
      expect:
        data.iterations: 3

marketplace:
  tags: [control]
  maturity: beta
